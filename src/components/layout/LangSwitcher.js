"use client";
import React, { useEffect } from "react";
import { usePathname, useSearchParams } from "next/navigation";
import { useRouter } from "next/navigation";
import Image from "next/image";
const LangSwitcher = ({ en, darkMode }) => {
  useEffect(() => {
    document.querySelector("body").classList.remove("active");
  }, []);
  const pathname = usePathname();
  let newPath = pathname.includes("/en")
    ? pathname.replace("/en", "")
    : "/en" + pathname;
  const searchParams = useSearchParams();
  const page = searchParams.get("page");
  newPath = page ? newPath + "?page=" + page : newPath;

  const router = useRouter();
  const handleLang = () => {
    // document.getElementById("langToggler").classList.add("active");
    setTimeout(() => {
      router.push(newPath || "/");
    }, 800);
  };
  return (
    <div
      onClick={handleLang}
      className="relative select-none z-[2] flex gap-x-[8px] md:gap-x-[0.6vw] items-center cursor-pointer lngswitch transition-all duration-500 hover:text-[#4FE0A3]"
    >
      <div className="relative w-[20px] md:w-[1.25vw] h-[20px] md:h-[1.25vw]  ">
        {/* <Image
          src={
            darkMode
              ? "/images/icons/dark_globe.svg"
              : "/images/icons/globe.svg"
          }
          fill
          alt="lang swithcer"
        /> */}
        {darkMode ? (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            className="w-full h-full"
            viewBox="0 0 24 24"
            fill="none"
          >
            <path
              d="M0 11.9988C0 12.0025 0.00199185 12.0055 0.00210704 12.0091C0.00629231 18.5103 5.27766 24.0002 12.0009 24.0002C18.5993 24.0002 24 18.6238 24 12.0012C24 5.34336 18.5644 -0.000244141 11.9991 -0.000244141C5.21066 -0.000244141 0.00935446 5.53978 0.00222221 11.9879C0.00210702 11.9917 0 11.9949 0 11.9988ZM3.73541 4.69509C4.66135 5.29838 5.6405 5.79587 6.66194 6.17971C6.22551 7.76405 5.96531 9.57542 5.92817 11.5189H0.974046C1.08695 8.90803 2.11108 6.53069 3.73541 4.69509ZM9.18145 1.32938C8.27337 2.24826 7.50422 3.6014 6.94205 5.26265C6.06216 4.92772 5.21303 4.50796 4.40884 3.99861C5.80628 2.67149 7.46235 1.77784 9.18145 1.32938ZM19.5913 3.99691C18.7876 4.50632 17.939 4.9259 17.0598 5.26098C16.5004 3.60861 15.7362 2.26103 14.8341 1.34271C16.6674 1.83246 18.2419 2.71632 19.5913 3.99691ZM23.0278 11.5189H18.0742C18.037 9.57478 17.7767 7.76294 17.3399 6.17822C18.3609 5.79422 19.3395 5.29663 20.2649 4.69336C21.8902 6.52922 22.9149 8.90721 23.0278 11.5189ZM20.2671 19.3066C19.3406 18.7041 18.3614 18.2071 17.3402 17.8235C17.7771 16.2377 18.0374 14.4244 18.0742 12.4788H23.028C22.9161 15.0911 21.8921 17.47 20.2671 19.3066ZM14.8402 22.6536C15.7397 21.7353 16.5018 20.3898 17.0599 18.7409C17.9396 19.0755 18.7889 19.4945 19.5937 20.0031C18.3118 21.2231 16.7323 22.147 14.8402 22.6536ZM4.41106 20.0059C5.21502 19.4964 6.06363 19.0768 6.9427 18.7417C7.5034 20.398 8.26998 21.7479 9.17483 22.6663C7.41309 22.2036 5.79334 21.3169 4.41106 20.0059ZM12.479 22.9883V17.8281C13.7288 17.8695 14.9544 18.0684 16.1319 18.4248C15.2819 20.9319 13.9613 22.676 12.479 22.9883ZM12.479 16.8694V12.4788H17.1144C17.0765 14.2908 16.8242 16.0047 16.4128 17.5051C15.1452 17.1213 13.8247 16.9112 12.479 16.8694ZM12.479 11.5189V7.1334C13.8252 7.09157 15.1456 6.8812 16.4128 6.497C16.8239 7.99622 17.0762 9.70845 17.1144 11.5189H12.479ZM12.479 6.17468V1.01402C13.9613 1.32633 15.2819 3.07045 16.1319 5.57756C14.9549 5.93428 13.7293 6.13322 12.479 6.17468ZM11.5191 1.01467V6.17467C10.2702 6.13328 9.04582 5.9348 7.86982 5.57882C8.719 3.07314 10.0381 1.32918 11.5191 1.01467ZM11.5191 7.1334V11.5189H6.88798C6.92618 9.70891 7.17834 7.99706 7.58917 6.49811C8.85511 6.88152 10.1742 7.0916 11.5191 7.1334ZM11.5191 12.4788V16.8694C10.1747 16.9113 8.8557 17.1216 7.58952 17.5056C7.17811 16.0051 6.92583 14.291 6.88798 12.4788H11.5191ZM11.5191 17.8281V22.9877C10.0384 22.6732 8.71947 20.9299 7.87034 18.4251C9.0464 18.0685 10.2706 17.8696 11.5191 17.8281ZM5.92811 12.4788C5.96496 14.4248 6.22533 16.2384 6.66247 17.8244C5.64167 18.2084 4.663 18.7061 3.7374 19.3095C2.11085 17.4725 1.08577 15.0924 0.973868 12.4788H5.92811Z"
              fill="#244A54"
            />
          </svg>
        ) : (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            className="w-full h-full"
            viewBox="0 0 24 25"
            fill="none"
          >
            <path
              d="M0 12.4788C0 12.4825 0.00199185 12.4854 0.00210704 12.4891C0.00629231 18.9903 5.27766 24.4802 12.0009 24.4802C18.5993 24.4802 24 19.1037 24 12.4811C24 5.82334 18.5644 0.479736 11.9991 0.479736C5.21066 0.479736 0.00935446 6.01976 0.00222221 12.4678C0.00210702 12.4717 0 12.4749 0 12.4788ZM3.73541 5.17507C4.66135 5.77836 5.6405 6.27585 6.66194 6.65969C6.22551 8.24403 5.96531 10.0554 5.92817 11.9988H0.974046C1.08695 9.38801 2.11108 7.01067 3.73541 5.17507ZM9.18145 1.80936C8.27337 2.72824 7.50422 4.08139 6.94205 5.74263C6.06216 5.4077 5.21303 4.98794 4.40884 4.47859C5.80628 3.15147 7.46235 2.25782 9.18145 1.80936ZM19.5913 4.47689C18.7876 4.9863 17.939 5.40588 17.0598 5.74096C16.5004 4.08859 15.7362 2.74101 14.8341 1.82269C16.6674 2.31244 18.2419 3.1963 19.5913 4.47689ZM23.0278 11.9988H18.0742C18.037 10.0548 17.7767 8.24292 17.3399 6.6582C18.3609 6.27421 19.3395 5.77661 20.2649 5.17334C21.8902 7.0092 22.9149 9.38719 23.0278 11.9988ZM20.2671 19.7865C19.3406 19.1841 18.3614 18.687 17.3402 18.3035C17.7771 16.7177 18.0374 14.9044 18.0742 12.9588H23.028C22.9161 15.5711 21.8921 17.9499 20.2671 19.7865ZM14.8402 23.1335C15.7397 22.2152 16.5018 20.8698 17.0599 19.2209C17.9396 19.5555 18.7889 19.9744 19.5937 20.4831C18.3118 21.7031 16.7323 22.627 14.8402 23.1335ZM4.41106 20.4859C5.21502 19.9764 6.06363 19.5568 6.9427 19.2217C7.5034 20.878 8.26998 22.2279 9.17483 23.1463C7.41309 22.6836 5.79334 21.7969 4.41106 20.4859ZM12.479 23.4683V18.3081C13.7288 18.3495 14.9544 18.5483 16.1319 18.9047C15.2819 21.4119 13.9613 23.156 12.479 23.4683ZM12.479 17.3493V12.9588H17.1144C17.0765 14.7708 16.8242 16.4847 16.4128 17.9851C15.1452 17.6013 13.8247 17.3912 12.479 17.3493ZM12.479 11.9988V7.61338C13.8252 7.57155 15.1456 7.36119 16.4128 6.97698C16.8239 8.4762 17.0762 10.1884 17.1144 11.9988H12.479ZM12.479 6.65466V1.494C13.9613 1.80631 15.2819 3.55043 16.1319 6.05754C14.9549 6.41426 13.7293 6.6132 12.479 6.65466ZM11.5191 1.49465V6.65465C10.2702 6.61326 9.04582 6.41479 7.86982 6.0588C8.719 3.55312 10.0381 1.80916 11.5191 1.49465ZM11.5191 7.61338V11.9988H6.88798C6.92618 10.1889 7.17834 8.47704 7.58917 6.97809C8.85511 7.3615 10.1742 7.57158 11.5191 7.61338ZM11.5191 12.9588V17.3494C10.1747 17.3913 8.8557 17.6016 7.58952 17.9856C7.17811 16.485 6.92583 14.771 6.88798 12.9588H11.5191ZM11.5191 18.3081V23.4676C10.0384 23.1532 8.71947 21.4099 7.87034 18.905C9.0464 18.5485 10.2706 18.3496 11.5191 18.3081ZM5.92811 12.9588C5.96496 14.9047 6.22533 16.7183 6.66247 18.3044C5.64167 18.6884 4.663 19.1861 3.7374 19.7895C2.11085 17.9525 1.08577 15.5724 0.973868 12.9588H5.92811Z"
              fill="white"
            />
          </svg>
        )}
      </div>
      {en ? "العربية" : "English"}
    </div>
  );
};

export default LangSwitcher;
